<!DOCTYPE html>
 <html>
 <center> <table cellspacing="8" cellpadding="20" border="3" bgcolor="#000000">
 <tr>
   <td><font color="#ffffff" face="Serif, verdana, helvetica">
 <b> <center>GPS INFORMATION</b>
   </font></td>
 </tr>
 <tr>
   <td bgcolor="#ff8000">
   <font face="serif verdana, arial">
    <body style="background-color:White;">
 
        <script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" />
    </style>



</head>

    <div>
   <center>
    <div><label>Latitud </label>
        <label id="latID" style="margin-left: 20px; border:1px outset black; blockquote: 7px; width:600px; "></label>
    </div>

    <div><label>Longitud</label>

        <label id="longID" style="margin-left: 20px;border:1px outset black; blockquote: 7px; width:600px; "></label>
    </div>

    <div><label>TimeStamp</label>
        <label id="dateID" style="margin-left: 20px;border:1px outset black; blockquote: 7px; width:600px; "></label>
    </div>


    </div>
 


    <script>
        const latID = document.getElementById('latID');
        const longID = document.getElementById('longID');
        const dateID = document.getElementById('dateID');
        const timeID = document.getElementById('timeID');
        
        const showData = async () => {
            fetch('/data', {
                // mode: 'no-cors',
                method: 'GET',
                headers: {
                    Accept: 'application/json',
                },
            },
            ).then(response => {
                if (response.ok) {
                    response.json().then(json => {
                        console.log(json);
                        latID.textContent = json.lat;
                        longID.textContent = json.lng;
                        dateID.textContent = json.date.split("T")[0] + " - " + json.hour;
                    });
                }
            });
        };
        showData();
        const timer = setInterval(() => {
            showData();
        }, 5000);

      

    </script>
       <div id="map"></div>
       <script>
           var map = L.map('map').
              setView([41.66, -4.72],
              15);
         </script>
   
        <script>   
          L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://cloudmade.com">CloudMade</a>',
         maxZoom: 18
         }).addTo(map);
   
         L.control.scale().addTo(map);
   
         L.marker([41.66, -4.71],{draggable: true}).addTo(map);
        </script>
    </body>

</html>
